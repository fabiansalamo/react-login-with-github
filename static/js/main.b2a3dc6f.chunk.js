(this["webpackJsonplogin-with-github"]=this["webpackJsonplogin-with-github"]||[]).push([[0],{37:function(n,e,t){"use strict";t.r(e);var i=t(1),r=t(0),c=t(21),o=t.n(c),a=t(15),s=t(12),l=t(2),d=t(13),h=t(14);function g(){var n=Object(d.a)(["\n.container{\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  font-family: Arial;\n\n  button{\n    all: unset;\n    width: 100px;\n    height: 35px;\n    margin: 10px 10px 0 0;\n    align-self: flex-end;\n    background-color: #0041C2;\n    color: #fff;\n    text-align: center;\n    border-radius: 3px;\n    border: 1px solid #0041C2;\n\n    &:hover{\n      background-color: #fff;\n      color: #0041C2;\n    }\n  }\n\n  >div{\n    height: 100%;\n    width: 100%;\n    display: flex;\n    font-size: 18px;\n    justify-content: center;\n    align-items: center;\n\n    .content{\n      display: flex;\n      flex-direction: column;\n      padding: 20px 100px;    \n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      width: auto;\n  \n      img{\n        height: 150px;\n        width: 150px;\n        border-radius: 50%;\n      }\n  \n      >span:nth-child(2){\n        margin-top: 20px;\n        font-weight: bold;\n      }\n  \n      >span:not(:nth-child(2)){\n        margin-top: 8px;\n        font-size: 14px;\n      }\n  \n    }\n\n  }\n}\n"]);return g=function(){return n},n}function p(){var n=Object(r.useContext)(w),e=n.state,t=n.dispatch;if(!e.isLoggedIn)return Object(i.jsx)(l.a,{to:"/login"});var c=e.user,o=c.avatar_url,a=c.name,s=c.public_repos,d=c.followers,h=c.following;return Object(i.jsx)(u,{children:Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("button",{onClick:function(){t({type:"LOGOUT"})},children:"Logout"}),Object(i.jsx)("div",{children:Object(i.jsxs)("div",{className:"content",children:[Object(i.jsx)("img",{src:o,alt:"Avatar"}),Object(i.jsx)("span",{children:a}),Object(i.jsxs)("span",{children:[s," Repos"]}),Object(i.jsxs)("span",{children:[d," Followers"]}),Object(i.jsxs)("span",{children:[h," Following"]})]})})]})})}var u=h.a.section(g()),j=t(7),b=t(25),x=t.n(b);function f(){var n=Object(d.a)(["\n  .container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    font-family: Arial;\n    \n\n    > div:nth-child(1) {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      transition: 0.3s;\n      width: 25%;\n      height: 45%;\n\n      > h1 {\n        font-size: 2rem;\n        margin-bottom: 20px;\n      }\n\n      > span:nth-child(2) {\n        font-size: 1.1rem;\n        color: #808080;\n        margin-bottom: 70px;\n      }\n\n      > span:nth-child(3) {\n        margin: 10px 0 20px;\n        color: red;\n      }\n\n      .login-container {\n        background-color: #000;\n        width: 70%;\n        border-radius: 3px;\n        color: #fff;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        > .login-link {\n          text-decoration: none;\n          color: #fff;\n          text-transform: uppercase;\n          cursor: default;\n          display: flex;\n          align-items: center;          \n          height: 40px;\n\n          > span:nth-child(2) {\n            margin-left: 5px;\n          }\n        }\n\n        .loader-container {\n          display: flex;\n          justify-content: center;\n          align-items: center;          \n          height: 40px;\n        }\n\n        .loader {\n          border: 4px solid #f3f3f3;\n          border-top: 4px solid #3498db;\n          border-radius: 50%;\n          width: 12px;\n          height: 12px;\n          animation: spin 2s linear infinite;\n        }\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return n},n}function O(){var n=Object(r.useContext)(w),e=n.state,t=n.dispatch,c=Object(r.useState)({errorMessage:"",isLoading:!1}),o=Object(a.a)(c,2),s=o[0],d=o[1],h=e.client_id,g=e.redirect_uri;return Object(r.useEffect)((function(){var n=window.location.href;if(n.includes("?code=")){var i=n.split("?code=");window.history.pushState({},null,i[0]),d(Object(j.a)(Object(j.a)({},s),{},{isLoading:!0}));var r={code:i[1]},c=e.proxy_url;fetch(c,{method:"POST",body:JSON.stringify(r)}).then((function(n){return n.json()})).then((function(n){t({type:"LOGIN",payload:{user:n,isLoggedIn:!0}})})).catch((function(n){d({isLoading:!1,errorMessage:"Sorry! Login failed"})}))}}),[e,t,s]),e.isLoggedIn?Object(i.jsx)(l.a,{to:"/"}):Object(i.jsx)(m,{children:Object(i.jsx)("section",{className:"container",children:Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Welcome"}),Object(i.jsx)("span",{children:"Super amazing app"}),Object(i.jsx)("span",{children:s.errorMessage}),Object(i.jsx)("div",{className:"login-container",children:s.isLoading?Object(i.jsx)("div",{className:"loader-container",children:Object(i.jsx)("div",{className:"loader"})}):Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("a",{className:"login-link",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat(h,"&redirect_uri=").concat(g),onClick:function(){d(Object(j.a)(Object(j.a)({},s),{},{errorMessage:""}))},children:[Object(i.jsx)(x.a,{}),Object(i.jsx)("span",{children:"Login with GitHub"})]})})})]})})})}var m=h.a.section(f()),y={isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||null,client_id:"93b83b6c4daa8cf41474",redirect_uri:"http://localhost:3000/login",client_secret:"a495ec832fd9bca11fe47acc8938b66890d96fca",proxy_url:"http://localhost:4000/authenticate"},v=function(n,e){switch(e.type){case"LOGIN":return localStorage.setItem("isLoggedIn",JSON.stringify(e.payload.isLoggedIn)),localStorage.setItem("user",JSON.stringify(e.payload.user)),Object(j.a)(Object(j.a)({},n),{},{isLoggedIn:e.payload.isLoggedIn,user:e.payload.user});case"LOGOUT":return localStorage.clear(),Object(j.a)(Object(j.a)({},n),{},{isLoggedIn:!1,user:null});default:return n}},w=Object(r.createContext)();var L=function(){var n=Object(r.useReducer)(v,y),e=Object(a.a)(n,2),t=e[0],c=e[1];return Object(i.jsx)(w.Provider,{value:{state:t,dispatch:c},children:Object(i.jsx)(s.a,{children:Object(i.jsxs)(l.d,{children:[Object(i.jsx)(l.b,{path:"/login",component:O}),Object(i.jsx)(l.b,{path:"/",component:p})]})})})};o.a.render(Object(i.jsx)(L,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.b2a3dc6f.chunk.js.map