{"version":3,"sources":["components/Home.js","components/Login.js","store/reducer/index.js","App.js","index.js"],"names":["Home","useContext","AuthContext","state","dispatch","isLoggedIn","to","user","avatar_url","name","public_repos","followers","following","Wrapper","className","onClick","type","src","alt","Styled","section","Login","useState","errorMessage","isLoading","data","setData","client_id","redirect_uri","useEffect","url","window","location","href","includes","newUrl","split","history","pushState","requestData","code","proxy_url","fetch","method","body","JSON","stringify","then","response","json","payload","catch","error","initialState","parse","localStorage","getItem","process","client_secret","reducer","action","setItem","clear","createContext","App","useReducer","Provider","value","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c333a708.chunk.js","sourcesContent":["import React, { useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Styled from \"styled-components\";\nimport { AuthContext } from \"../App\";\n\n\nexport default function Home() {\n  const { state, dispatch } = useContext(AuthContext);\n\n  if (!state.isLoggedIn) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  const { avatar_url, name, public_repos, followers, following } = state.user\n\n  const handleLogout = () => {\n    dispatch({\n      type: \"LOGOUT\"\n    });\n  } \n\n  return (\n    <Wrapper>\n      <div className=\"container\">\n        <button onClick={()=> handleLogout()}>Logout</button>\n        <div>\n          <div className=\"content\">\n            <img src={avatar_url} alt=\"Avatar\"/>\n            <span>{name}</span>\n            <span>{public_repos} Repos</span>\n            <span>{followers} Followers</span>\n            <span>{following} Following</span>\n          </div>\n        </div>\n      </div>\n    </Wrapper>\n  );\n}\n\nconst Wrapper = Styled.section`\n.container{\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  font-family: Arial;\n\n  button{\n    all: unset;\n    width: 100px;\n    height: 35px;\n    margin: 10px 10px 0 0;\n    align-self: flex-end;\n    background-color: #0041C2;\n    color: #fff;\n    text-align: center;\n    border-radius: 3px;\n    border: 1px solid #0041C2;\n\n    &:hover{\n      background-color: #fff;\n      color: #0041C2;\n    }\n  }\n\n  >div{\n    height: 100%;\n    width: 100%;\n    display: flex;\n    font-size: 18px;\n    justify-content: center;\n    align-items: center;\n\n    .content{\n      display: flex;\n      flex-direction: column;\n      padding: 20px 100px;    \n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      width: auto;\n  \n      img{\n        height: 150px;\n        width: 150px;\n        border-radius: 50%;\n      }\n  \n      >span:nth-child(2){\n        margin-top: 20px;\n        font-weight: bold;\n      }\n  \n      >span:not(:nth-child(2)){\n        margin-top: 8px;\n        font-size: 14px;\n      }\n  \n    }\n\n  }\n}\n`;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Styled from \"styled-components\";\nimport GithubIcon from \"mdi-react/GithubIcon\";\nimport { AuthContext } from \"../App\";\n\n\nexport default function Login() {\n  const { state, dispatch } = useContext(AuthContext);\n  const [data, setData] = useState({ errorMessage: \"\", isLoading: false });\n\n  const { client_id, redirect_uri } = state;\n\n  useEffect(() => {\n    // After requesting Github access, Github redirects back to your app with a code parameter\n    const url = window.location.href;\n    const hasCode = url.includes(\"?code=\");\n\n    // If Github API returns the code parameter\n    if (hasCode) {\n      const newUrl = url.split(\"?code=\");\n      window.history.pushState({}, null, newUrl[0]);\n      setData({ ...data, isLoading: true });\n\n      const requestData = {\n        code: newUrl[1]\n      };\n\n      const proxy_url = state.proxy_url;\n\n      // Use code parameter and other parameters to make POST request to proxy_server\n      fetch(proxy_url, {\n        method: \"POST\",\n        body: JSON.stringify(requestData)\n      })\n        .then(response => response.json())\n        .then(data => {\n          dispatch({\n            type: \"LOGIN\",\n            payload: { user: data, isLoggedIn: true }\n          });\n        })\n        .catch(error => {\n          setData({\n            isLoading: false,\n            errorMessage: \"Sorry! Login failed\"\n          });\n        });\n    }\n  }, [state, dispatch, data]);\n\n  if (state.isLoggedIn) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <Wrapper>\n      <section className=\"container\">\n        <div>\n          <h1>Welcome</h1>\n          <span>Super amazing app</span>\n          <span>{data.errorMessage}</span>\n          <div className=\"login-container\">\n            {data.isLoading ? (\n              <div className=\"loader-container\">\n                <div className=\"loader\"></div>\n              </div>\n            ) : (\n              <>\n                {\n                  // Link to request GitHub access\n                }\n                <a\n                  className=\"login-link\"\n                  href={`https://github.com/login/oauth/authorize?scope=user&client_id=${client_id}&redirect_uri=${redirect_uri}`}\n                  onClick={() => {\n                    setData({ ...data, errorMessage: \"\" });\n                  }}\n                >\n                  <GithubIcon />\n                  <span>Login with GitHub</span>\n                </a>\n              </>\n            )}\n          </div>\n        </div>\n      </section>\n    </Wrapper>\n  );\n}\n\nconst Wrapper = Styled.section`\n  .container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    font-family: Arial;\n    \n\n    > div:nth-child(1) {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      transition: 0.3s;\n      width: 25%;\n      height: 45%;\n\n      > h1 {\n        font-size: 2rem;\n        margin-bottom: 20px;\n      }\n\n      > span:nth-child(2) {\n        font-size: 1.1rem;\n        color: #808080;\n        margin-bottom: 70px;\n      }\n\n      > span:nth-child(3) {\n        margin: 10px 0 20px;\n        color: red;\n      }\n\n      .login-container {\n        background-color: #000;\n        width: 70%;\n        border-radius: 3px;\n        color: #fff;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        > .login-link {\n          text-decoration: none;\n          color: #fff;\n          text-transform: uppercase;\n          cursor: default;\n          display: flex;\n          align-items: center;          \n          height: 40px;\n\n          > span:nth-child(2) {\n            margin-left: 5px;\n          }\n        }\n\n        .loader-container {\n          display: flex;\n          justify-content: center;\n          align-items: center;          \n          height: 40px;\n        }\n\n        .loader {\n          border: 4px solid #f3f3f3;\n          border-top: 4px solid #3498db;\n          border-radius: 50%;\n          width: 12px;\n          height: 12px;\n          animation: spin 2s linear infinite;\n        }\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      }\n    }\n  }\n`;\n","export const initialState = {\n  isLoggedIn: JSON.parse(localStorage.getItem(\"isLoggedIn\")) || false,\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  client_id: process.env.REACT_APP_CLIENT_ID,\n  redirect_uri: process.env.REACT_APP_REDIRECT_URI,\n  client_secret: process.env.REACT_APP_CLIENT_SECRET,\n  proxy_url: process.env.REACT_APP_PROXY_URL\n};\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\": {\n      localStorage.setItem(\"isLoggedIn\", JSON.stringify(action.payload.isLoggedIn))\n      localStorage.setItem(\"user\", JSON.stringify(action.payload.user))\n      return {\n        ...state,\n        isLoggedIn: action.payload.isLoggedIn,\n        user: action.payload.user\n      };\n    }\n    case \"LOGOUT\": {\n      localStorage.clear()\n      return {\n        ...state,\n        isLoggedIn: false,\n        user: null\n      };\n    }\n    default:\n      return state;\n  }\n};\n","import React, { createContext, useReducer } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Home from \"./components/Home\";\nimport Login from \"./components/Login\";\nimport { initialState, reducer } from \"./store/reducer\";\n\n\nexport const AuthContext = createContext();\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        state,\n        dispatch\n      }}\n    >\n    <Router>\n      <Switch>\n        <Route path=\"/login\" component={Login}/>\n        <Route path=\"/\" component={Home}/>\n      </Switch>\n    </Router>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}